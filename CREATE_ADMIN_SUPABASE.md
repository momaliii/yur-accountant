# ููููุฉ ุฅูุดุงุก ุญุณุงุจ Admin (ูุน Supabase)

## ูุธุฑุฉ ุนุงูุฉ

ููุงู **3 ุทุฑู** ูุฅูุดุงุก ุญุณุงุจ admin:

---

## ุงูุทุฑููุฉ 1: ุงุณุชุฎุฏุงู Supabase Dashboard (ุงูุฃุณูู) โญ

**ุงูุฃูุถู ูู:** ุฅูุดุงุก ุฃูู admin account

### ุงูุฎุทูุงุช:

1. **ุณุฌู ุญุณุงุจ ุฌุฏูุฏ:**
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงุถุบุท ุนูู **"Register"**
   - ุณุฌู ุญุณุงุจ ุฌุฏูุฏ ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ

2. **ุงูุชุญ Supabase Dashboard:**
   - ุงุฐูุจ ุฅูู [https://supabase.com/dashboard](https://supabase.com/dashboard)
   - ุงุฎุชุฑ ูุดุฑูุนู
   - ุงุถุบุท ุนูู **"Authentication"** โ **"Users"**

3. **ุญุฏุฏ ุงููุณุชุฎุฏู:**
   - ุงุจุญุซ ุนู ุงููุณุชุฎุฏู ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ุงุถุบุท ุนูู ุงููุณุชุฎุฏู

4. **ุนุฏูู User Metadata:**
   - ุงุถุบุท ุนูู **"Edit"** ุฃู **"..."** โ **"Edit User"**
   - ูู ูุณู **"Raw User Meta Data"**ุ ุฃุถู:
     ```json
     {
       "name": "Your Name",
       "role": "admin"
     }
     ```
   - ุงุญูุธ ุงูุชุบููุฑุงุช

5. **ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู:**
   - ุณุฌู ุฎุฑูุฌ ูู ุงูุชุทุจูู
   - ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
   - ุณุชุญุตู ุนูู ุตูุงุญูุงุช admin!

---

## ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Script (ููุตู ุจู) โญโญ

**ุงูุฃูุถู ูู:** ุฅูุดุงุก admin ุจุณุฑุนุฉ

### ุงูุฎุทูุงุช:

1. **ุฃุถู Environment Variables ูู `.env`:**
   ```env
   SUPABASE_URL=https://xxxxx.supabase.co
   SUPABASE_SERVICE_ROLE_KEY=sb_secret_...
   ```

2. **ุดุบูู Script:**
   ```bash
   node scripts/createAdminSupabase.js
   ```

3. **ุงุชุจุน ุงูุชุนูููุงุช:**
   - ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ (6 ุฃุญุฑู ุนูู ุงูุฃูู)
   - ุฃุฏุฎู ุงูุงุณู (ุงุฎุชูุงุฑู)

4. **ุณุฌู ุฏุฎูู:**
   - ุงุณุชุฎุฏู ุงูุญุณุงุจ ุงูุฐู ุฃูุดุฃุชู
   - ุณุชุญุตู ุนูู ุตูุงุญูุงุช admin ุชููุงุฆูุงู!

---

## ุงูุทุฑููุฉ 3: ุงุณุชุฎุฏุงู Supabase SQL Editor

**ุงูุฃูุถู ูู:** ุฅูุดุงุก admin ุจุฑูุฌูุงู

### ุงูุฎุทูุงุช:

1. **ุณุฌู ุญุณุงุจ ุฌุฏูุฏ** ูู ุงูุชุทุจูู

2. **ุงูุชุญ Supabase SQL Editor:**
   - Supabase Dashboard โ **"SQL Editor"**
   - ุงุถุบุท ุนูู **"New query"**

3. **ุดุบูู SQL:**
   ```sql
   -- ุงุญุตู ุนูู user_id ูู Authentication โ Users
   -- ุซู ุดุบูู:
   
   UPDATE auth.users
   SET raw_user_meta_data = jsonb_set(
     COALESCE(raw_user_meta_data, '{}'::jsonb),
     '{role}',
     '"admin"'
   )
   WHERE email = 'your-email@example.com';
   ```

4. **ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู**

---

## ุงูุทุฑููุฉ 4: ุชุญุฏูุซ ูุณุชุฎุฏู ููุฌูุฏ ุฅูู Admin

ุฅุฐุง ูุงู ูุฏูู ุญุณุงุจ ููุฌูุฏ ูุชุฑูุฏ ุชุญูููู ุฅูู admin:

### ุจุงุณุชุฎุฏุงู Supabase Dashboard:

1. **ุงูุชุญ Supabase Dashboard**
2. **Authentication** โ **Users**
3. **ุงุจุญุซ ุนู ุงููุณุชุฎุฏู** ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู
4. **ุงุถุบุท ุนูู ุงููุณุชุฎุฏู**
5. **Edit User** โ **Raw User Meta Data**
6. **ุฃุถู ุฃู ุนุฏูู:**
   ```json
   {
     "role": "admin"
   }
   ```
7. **ุงุญูุธ**
8. **ุณุฌู ุฎุฑูุฌ ุซู ุฏุฎูู**

### ุจุงุณุชุฎุฏุงู SQL:

```sql
UPDATE auth.users
SET raw_user_meta_data = jsonb_set(
  COALESCE(raw_user_meta_data, '{}'::jsonb),
  '{role}',
  '"admin"'
)
WHERE email = 'your-email@example.com';
```

---

## ุงูุชุญูู ูู Admin Access

ุจุนุฏ ุฅูุดุงุก admin:

1. **ุณุฌู ุฎุฑูุฌ** ูู ุงูุชุทุจูู
2. **ุณุฌู ุฏุฎูู** ูุฑุฉ ุฃุฎุฑู
3. ูุฌุจ ุฃู ุชุฑู:
   - โ **"Admin"** badge ูู profile dropdown
   - โ **"Admin Panel"** link ูู ุงููุงุฆูุฉ
   - โ Admin Dashboard ูุชุงุญ ุนูู `/admin`

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุง ุฃุฑู Admin Panelุ
- โ ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
- โ ุชุญูู ูู ุฃู `role: "admin"` ููุฌูุฏ ูู User Metadata
- โ ุงูุณุญ localStorage ูู ุงููุชุตูุญ ูุฌุฑุจ ูุฑุฉ ุฃุฎุฑู

### Admin Dashboard ูุธูุฑ "Forbidden"ุ
- โ JWT token ูุฏ ูููู ูุฎุฒูุงู ูุน role ูุฏูู
- โ ุณุฌู ุฎุฑูุฌ ูุงููุงู ูุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
- โ ุชุญูู ูู Supabase ุฃู role ูุญููุธ ุจุดูู ุตุญูุญ

### Script ูุง ูุนููุ
- โ ุชุฃูุฏ ูู ุฅุถุงูุฉ `SUPABASE_URL` ู `SUPABASE_SERVICE_ROLE_KEY` ูู `.env`
- โ ุชุฃูุฏ ูู ุฃู Service Role Key ุตุญูุญ
- โ ุชุญูู ูู ุฃู Supabase ูุชุตู

---

## ููุงุญุธุงุช ูููุฉ

### โ๏ธ Service Role Key ูุทููุจ

Script ูุณุชุฎุฏู Service Role Key ูููุตูู ุฅูู Supabase Auth Admin API.

### โ User Metadata

Role ูุชู ุญูุธู ูู `user_metadata.role` ูู Supabase Auth.

### ๐ ุงูุฃูุงู

- Service Role Key ุณุฑู - ูุง ุชุดุงุฑูู
- Admin accounts ูุฏููุง ุตูุงุญูุงุช ูุงููุฉ
- ุงุณุชุฎุฏู admin accounts ุจุญุฐุฑ

---

## ููุงุฑูุฉ ุงูุทุฑู

| ุงูุทุฑููุฉ | ุงูุณูููุฉ | ุงูุณุฑุนุฉ | ุงูููุตู ุจู |
|---------|---------|--------|-----------|
| Supabase Dashboard | โญโญโญ | โญโญ | โ ููุฃูู ูุฑุฉ |
| Script | โญโญโญ | โญโญโญ | โ ุงูุฃุณุฑุน |
| SQL Editor | โญโญ | โญโญ | โ ูููุณุชุฎุฏููู ุงููุชูุฏููู |

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููุงูุฑ 2025 (Supabase)
